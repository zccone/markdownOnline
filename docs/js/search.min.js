!function() {
	var f = {},
		u = {
			EXPIRE_KEY: "docsify.search.expires",
			INDEX_KEY: "docsify.search.index"
		};
	function h(e) {
		var n = {
			"&": "&amp;",
			"<": "&lt;",
			">": "&gt;",
			'"': "&quot;",
			"'": "&#39;",
			"/": "&#x2F;"
		};
		return String (e).replace (/[&<>"'/]/g, function(e) {
			return n[e]
		})
	}
	function o(o, r) {
		var e,
			n,
			t = "auto" === o.paths,
			s = (e = o.namespace) ? u.EXPIRE_KEY + "/" + e : u.EXPIRE_KEY,
			c = (n = o.namespace) ? u.INDEX_KEY + "/" + n : u.INDEX_KEY,
			a = localStorage.getItem (s) < Date.now ();
		if(f = JSON.parse (localStorage.getItem (c)), a)
			f = {};
		else if(!t) return;
		var i,
			d,
			l = t ? (i = r.router, d = [], Docsify.dom.findAll (".sidebar-nav a:not(.section-link):not([data-nosearch])").forEach (function(e) {
				var n = e.href,
					t = e.getAttribute ("href"),
					a = i.parse (n).path;
				a && -1 === d.indexOf (a) && !Docsify.util.isAbsolutePath (t) && d.push (a)
			}), d) : o.paths,
			h = l.length,
			p = 0;
		l.forEach (function(i) {
			if(f[i]) return p++;
			Docsify.get (r.router.getFile (i), !1, r.config.requestHeaders).then (function(e) {
				var n,
					t,
					a;
				f[i] = function(n, e, t, a) {
					void 0 === e && (e = "");
					var i,
						o = window.marked.lexer (e),
						r = window.Docsify.slugify,
						s = {};
					return o.forEach (function(e) {
						    if("heading" === e.type && e.depth <= a) i = t.toURL (n, {
									id: r (e.text)
								}), s[i] = {
									slug: i,
									title: e.text,
									body: ""
								};else{
								if(!i) return;
								s[i] ? s[i].body ? s[i].body += "\n" + (e.text || "") : s[i].body = e.text : s[i] = {
									slug: i,
									title: "",
									body: ""
								}
							}
						}), r.clear (), s
				} (i, e, r.router, o.depth), h === ++p && (n = o.maxAge, t = s, a = c, localStorage.setItem (t, Date.now () + n), localStorage.setItem (a, JSON.stringify (f)))
			})
		})
	}
	var c,
		d = "";
	function highlight(node,reg){
	    if (node.nodeType == 3) {  //只处理文本节点
			var match = node.data.match(new RegExp(reg));
	        if (match) {
			  var highlightEl = document.createElement("em");
			  highlightEl.className="search-keyword";
	          highlightEl.dataset.highlight="y";
			  var wordNode = node.splitText(match.index);
	          wordNode.splitText(match[0].length);
			  var wordNew = document.createTextNode(wordNode.data);
	          highlightEl.appendChild(wordNew);
	          wordNode.parentNode.replaceChild(highlightEl, wordNode);
	        }
	    } else if (node.nodeType == 1 && (!node.dataset || node.dataset.highlight!="y")) {
			var nn = node.childNodes.length;
			for (var i = 0; i < nn; i++) {
	            highlight(node.childNodes[i], reg);
	        }
	    } 
	}
	function s(e) {
		var n = Docsify.dom.find ("div.search"),
			t = Docsify.dom.find (n, ".results-panel"),
			a = Docsify.dom.find (n, ".clear-button"),
			i = Docsify.dom.find (".sidebar-nav"),
			o = Docsify.dom.find (".app-name"),
			ct = Docsify.dom.find (".markdown-section");
			ct.innerHTML = ct.innerHTML.replace(/<\/?em.*?[^>]*>/gi, '');
		if(!e) return t.classList.remove ("show"), a.classList.remove ("show"), t.innerHTML = "", void (c.hideOtherSidebarContent && (i.classList.remove ("hide"), o.classList.remove ("hide")));

		var r = function(e) {
				var i = [],
					o = [];
				Object.keys (f).forEach (function(n) {
					o = o.concat (Object.keys (f[n]).map (function(e) {
						return f[n][e]
					}))
				});
				//var r = (e = e.trim ()).split (/[\s\-\\/]+/);
				var r = (e = e.trim ()).split (/[\-\\]+/);
				1 !== r.length && (r = [].concat (e, r));
				var karr = ['!','#','。','，',',','！',':', '-','&','<','>','"',']'];
				if(karr.indexOf(r[0]) != -1){
					r = [];
				}
				if(r.length > 0){
					var rxstr = r[0].replace(/[&?*>]/g, '');
					var zhRex = new RegExp("[\\u4E00-\\u9FFF]+", "g");
					if(zhRex.test(rxstr)){
						var reg = rxstr.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
						highlight(ct, reg);
					}
				}
				var idx = 0;
				for(var n = function(e) {
							var n = o[e],
								s = !1,
								c = "",
								x = -999,
								d = n.title && n.title.trim (),
								l = n.body && n.body.trim (),
								t = n.slug || "";
								d = d.replace(/<[^<>]+>/g, ''),
								tt = h(d);
								if(l){
									l = l.replace(/<[^<>]+>/g, '').replace(/[&?*>]/g, '');
								}
							if(d && l && (r.forEach (function(e) {
								var nk = e.replace(/\//g, '&#x2F;');
									var n,
										nt = new RegExp (nk.replace (/[|\\{}()[\]^$+*?.]/g, "\\$&"), "gi"),
										t = new RegExp (e.replace (/[|\\{}()[\]^$+*?.]/g, "\\$&"), "gi"),
										a = -1;
									if(n = d && d.search (t), a = l && l.search (t), n < 0 && a < 0){
										s = !1;
									}else{
										s = !0, a < 0 && (a = 0);
										var i,o = 0;
										if(n>=0){
											x = idx++;
											tt = h (d).replace (nt, '<em class="search-keyword">' + e + "</em>")
										}
										(o = 0 == (i = a < 11 ? 0 : a - 10) ? 70 : a + e.length + 60) > l.length && (o = l.length);
										var r = "..." + h (l).substring (i, o).replace (nt, '<em class="search-keyword">' + e + "</em>") + "...";
										c += r
									}
								}), s)){
								var a = {
									title: tt,
									content: c,
									// url: t.substr(0, t.indexOf("?"))
                  url: t
								};
								if(x>=0){
									i.splice (x, 0, a);
								}else{
									i.push (a);
								}
							}
						}, t = 0;t < o.length; t++) n (t);

				return i
			} (e),
			s = "";
		r.forEach (function(e) {
			s += '<div class="matching-post">\n<a href="' + e.url + '">\n<h2>' + e.title + "</h2>\n<p>" + e.content + "</p>\n</a>\n</div>"
		}), t.classList.add ("show"), a.classList.add ("show"), t.innerHTML = s || '<p class="empty">' + d + "</p>", c.hideOtherSidebarContent && (i.classList.add ("hide"), o.classList.add ("hide"))
	}
	function l(e) {
		c = e
	}
	function r(e, n) {
		var t,
			a,
			i,
			o,
			cc,
			r = n.router.parse ().query.s;
		l (e), Docsify.dom.style ("\n.sidebar {\n  padding-top: 0;\n}\n\n.search {\n  margin-bottom: 20px;\n  padding: 6px;\n  border-bottom: 1px solid #eee;\n}\n\n.search .input-wrap {\n  display: flex;\n  align-items: center;\n}\n\n.search .results-panel {\n  display: none;\n}\n\n.search .results-panel.show {\n  display: block;\n}\n\n.search input {\n outline: none;\n  border: 1px solid #e3e3e3;\n border-radius: 3px 0 0 3px; border-right: none;\n width: 100%;\n  padding: 0 7px;\n  line-height: 36px;\n  font-size: 14px;\n}\n\n.search input::-webkit-search-decoration,\n.search input::-webkit-search-cancel-button,\n.search input {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\n.search .clear-button {\n height:38px;\n width: 36px;\n  text-align: right;\n  line-height: 36px;\n  display: none;\n}\n\n.search .clear-button.show {\n  display: block;\n border-top:1px solid #e3e3e3;\n border-bottom:1px solid #e3e3e3;\n}\n\n.search .clear-button svg {\n  transform: scale(.5);\n margin-top:6px\n}\n\n.search h2 {\n  font-size: 17px;\n  margin: 10px 0;\n}\n\n.search a {\n  text-decoration: none;\n  color: inherit;\n}\n\n.search .matching-post {\n  border-bottom: 1px solid #eee;\n}\n\n.search .matching-post:last-child {\n  border-bottom: 0;\n}\n\n.search p {\n  font-size: 14px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.search p.empty {\n  text-align: center;\n}\n\n.app-name.hide, .sidebar-nav.hide {\n  display: none;\n}"), function(e) {
			void 0 === e && (e = "");
			var n = '<div class="input-wrap">\n    <input type="search" value="' + e + '" />\n      <div class="clear-button">\n        <svg width="26" height="24">\n          <circle cx="12" cy="12" r="11" fill="#ccc" />\n          <path stroke="white" stroke-width="2" d="M8.25,8.25,15.75,15.75" />\n          <path stroke="white" stroke-width="2"d="M8.25,15.75,15.75,8.25" />\n        </svg>\n      </div>\n    <div class="search-button"></div>\n  </div>\n    <div class="results-panel"></div>\n    </div>',
				t = Docsify.dom.create ("div", n),
				a = Docsify.dom.find ("aside")
				ss = Docsify.dom.find (".sidebar-nav");
			Docsify.dom.toggleClass (t, "search"), a.insertBefore(t, ss) //Docsify.dom.before (a, t)
		} (r), a = Docsify.dom.find ("div.search"), i = Docsify.dom.find (a, "input"), o = Docsify.dom.find (a, ".input-wrap"), cc = Docsify.dom.find (o, ".clear-button"), mp = Docsify.dom.find (a, "div.results-panel"), Docsify.dom.on (a, "click", function(e) {
			// setTimeout (function(e) {
			// 	if(i.value.trim() != '' && mp && mp.innerHTML.indexOf("matching-post") != -1){
			// 		var ww = Docsify.dom.find ("body").clientWidth;
			// 		if(ww <= 600){
			// 			Docsify.dom.find ("button.sidebar-toggle").click();
			// 		}
			// 		var rxstr = i.value.trim() .replace(/[&?*>]/g, '');
			// 		var zhRex = new RegExp("[\\u4E00-\\u9FFF]+", "g");
			// 		if(zhRex.test(rxstr)){
			// 			var reg = rxstr.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
			// 			highlight(Docsify.dom.find (".markdown-section"), reg);
			// 		}
			// 	}
			// }, 200);
			// return "A" !== e.target.tagName && e.stopPropagation ()
		}), Docsify.dom.on (i, "input", function(n) {
			clearTimeout (t), t = setTimeout (function(e) {
				return s (n.target.value.trim ())
			}, 100)
		}), Docsify.dom.on (cc, "click", function(e) {
			"INPUT" !== e.target.tagName && (i.value = "", s ())
		}), r && setTimeout (function(e) {
			return s (r)
		}, 500)
	}
	function p(e, n) {
		l (e), function(e, n) {
			var t = Docsify.dom.getNode ('.search input[type="search"]');
			if(t)
				if("string" == typeof e)
					t.placeholder = e;else{
					var a = Object.keys (e).filter (function(e) {
						return -1 < n.indexOf (e)
					})[0];
					t.placeholder = e[a]
			}
		} (e.placeholder, n.route.path), function(e, n) {
			if("string" == typeof e)
				d = e;else{
				var t = Object.keys (e).filter (function(e) {
					return -1 < n.indexOf (e)
				})[0];
				d = e[t]
			}
		} (e.noData, n.route.path)
	}
	var m = {
		placeholder: "Type to search",
		noData: "No Results!",
		paths: "auto",
		depth: 6,
		maxAge: 864e5,
		hideOtherSidebarContent: !1,
		namespace: void 0
	};
	$docsify.plugins = [].concat (function(e, n) {
		var t = Docsify.util,
			a = n.config.search || m;
		Array.isArray (a) ? m.paths = a : "object" == typeof a && (m.paths = Array.isArray (a.paths) ? a.paths : "auto", m.maxAge = t.isPrimitive (a.maxAge) ? a.maxAge : m.maxAge, m.placeholder = a.placeholder || m.placeholder, m.noData = a.noData || m.noData, m.depth = a.depth || m.depth, m.hideOtherSidebarContent = a.hideOtherSidebarContent || m.hideOtherSidebarContent, m.namespace = a.namespace || m.namespace);
		var i = "auto" === m.paths;
		e.mounted (function(e) {
			r (m, n), !i && o (m, n)
		}), e.doneEach (function(e) {
			p (m, n), i && o (m, n)
		})
	}, $docsify.plugins)
} ();
